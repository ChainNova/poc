!function(e,t){var n=e.location;e.__=function(e){var t=2<=arguments.length?[].slice.call(arguments,1):[];return t=[].slice.call(arguments,1),e.replace(/%s/g,function(){return t.shift()})};var o=t.documentElement;n.origin||(n.origin=n.protocol+"//"+n.host),"".format||(String.prototype.format=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return void 0!==e[n]?e[n]:t})});var r=e.CORE||(e.CORE={});r.hosts=[];var i=t.getElementById("jseed")&&t.getElementById("jseed").getAttribute("data-main").match(/^\/j\/.+?\/[_-\w]+?\//);r.jspath=i?i[0]:"/j/",r.api={trade:"/api/",blue:"/api/blue/"},r.title=function(e){var n=" - ",o=t.title.split(n);o[1]||o.push(o[0]),e&&(o[0]=e.replace(/^./,function(e){return e.toUpperCase()})),t.title=e?o.join(n):o[1]},r._createOnceEle=function(e,n){if(e){n||(n="div");var o=t.getElementById(e);return o||(o=t.createElement(n),o.id=e,t.body.appendChild(o)),o}},r._addClass=function(e,t){t=" "+t,e.className=e.className.replace(t,"")+t},r._removeClass=function(e,t){e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()},r._killEle=function(e){"string"==typeof e&&(e=t.getElementById(e)),r._addClass(e,opt.toggle||"noDis")},r._createEle=function(e,n){n=n||{},n.tag=n.tag||"div";var o=t.getElementById(e);return o?r._removeClass(o,"noDis"):(o=t.createElement(n.tag),t.body.appendChild(o)),e&&(o.id=e),o.className=n.c||"",n.closable?(clearTimeout(o.timer),o.timer=setTimeout(function(){r._addClass(o,"noDis")},1e4),o.onclick=function(){clearTimeout(o.timer),r._addClass(o,"noDis")}):r._removeClass(o,"noDis"),o},r.msg=function(e,t){t||(t="");var n="err"!=t,o=n?"sys-msg2":"sys-msg",i=r._createEle(o,{c:"sys-msg",closable:n,toggle:"off"});return r._addClass(i,t),i.innerHTML=['<p class="cnt">','<a href="javascript:void(0)" class="close" data-dismiss="cnt"></a>',e].join(""),i},r.ts=function(e){return(e?new Date(e):new Date).getTime()},r.tsid=function(e){return(e||"")+r.ts()+Math.round(1e4*Math.random())},r.offset=function(e){var n,o,r={top:0,left:0,width:0,height:0},i=e&&(e.ownerDocument||t);if(i)return n=i.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(r=e.getBoundingClientRect()),o=i.defaultView,{width:r.width||e.offsetWidth,height:r.height||e.offsetHeight,top:r.top+o.pageYOffset-n.clientTop,left:r.left+o.pageXOffset-n.clientLeft}},r.tooltip=function(e,n,o){if(e&&n){o||(o={}),o.placement||(o.placement="top"),void 0==o.autoClose&&(o.autoClose=!0);var i=t.createElement("div");i.className="tooltip "+o.placement+" "+(o.class||"")+" fade in",i.innerHTML='<div class="tooltip-arrow"></div><div class="tooltip-inner">'+n+"</div>",t.body.appendChild(i);var a=r.offset(e),s=document.getElementsByClassName("tooltip")[0];s.style.top=a.top+"px",s.style.left=a.left+"px";var c=s.offsetWidth,l=s.offsetHeight;switch(o.placement){case"right":a.left+=a.width,a.top+=a.height/2-l/2;break;case"bottom":a.left+=a.width/2-c/2,a.top+=a.height;break;case"left":a.left-=c,a.top+=a.height/2-l/2;break;default:a.left+=a.width/2-c/2,a.top-=l}s.style.top=a.top+"px",s.style.left=a.left+"px";var u=function(){t.body.removeChild(i),i=null};return o.autoClose&&setTimeout(u,o.time||500),i}},r.setCookie=function(e,n,o,r,i,a){var s=new Date;s.setTime(s.getTime());var c;!o||o instanceof Date?c=o||s:(o=1e3*o*60*60*24,c=new Date(s.getTime()+o));var l=e+"="+escape(n)+(o?";expires="+c.toGMTString():"")+(r?";path="+r:"")+(i?";domain="+i:"")+(a?";secure":"");t.cookie=l},r.getCookie=function(e){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(t.cookie);return n&&n[2]},r.queryFromArray=function(e){return function(t,n){return n instanceof RegExp?e.filter(function(e){return"string"==typeof e?e.match(n):!!e.name&&e.name.match(n)}):e}},r.j2q=function(e){var t=[];for(u in e){var n=e[u];"object"==typeof n&&(n=JSON.stringify(n)),"function"==typeof n&&(n=n.toString()),"undefined"!=typeof n&&t.push(encodeURIComponent(u)+"="+encodeURIComponent(n))}return t.join("&")},r.j2r=function(e){var t=[];return e.map(function(e){"object"==typeof e&&(e=JSON.stringify(e)),"function"==typeof e&&(e=e.toString()),t.push(encodeURIComponent(e))}),t.join("/")},r.pushArray=function(e){if(angular.isArray(e)){var t=e.slice.call(arguments,1);angular.forEach(t,function(t){e.push.apply(e,t)})}},r.getUTCHours=function(e){return(e||new Date).getUTCHours()},r.isApp=function(){return~o.className.indexOf("ua-app")},r.getNgPath=function(){var e=n.pathname.replace(/^\//,"");return e=e||n.hash.replace(/^#!?\//,""),e||"home"},r.getLoginCallbackUrl=function(){return"/passport/?passport=login&c="+encodeURIComponent(n.href)},r.pathNeedLogin=function(){var e=r.getNgPath();return/^(passport|msgs)/.test(e)?0:/^foo/.test(e)?-1:1};var a=t.createElement("a");a.id="fake",t.body.appendChild(a),r.redirect2=function(e,t){a.href=e,1==t&&(a.target="_top"),2==t&&(a.target="_blank"),a.click()},r.redirect2Login=function(e){r.redirect2(r.getLoginCallbackUrl(),e)},r.afterLogout=function(t){for(key in e.Const.user)"balance"!=key&&delete e.Const.user[key];t&&t(),e.angular&&setTimeout(function(){angular.element(o).scope().$emit("after-logout")})};var s=function(e){return{get:function(t){var n=e?e.getItem(t):null;if(!n||"null"===n)return null;try{n=JSON.parse(n)}catch(e){}return n},set:function(t,n){var o=n;if("undefined"==typeof o&&(o=n=null),"string"!=typeof n)try{o=JSON.stringify(n).replace(/,"\$\$hashKey":.*?(,|})/,"$1")}catch(e){}return e.setItem(t,o),n},getSet:function(e,t){var n=this,o=n.get(e);return setTimeout(function(){if(!o){n.set(e,t);try{o=JSON.parse(t)}catch(e){}}}),t},del:function(t){e.removeItem(t)}}};r.SS=s(sessionStorage),r.LS=s(localStorage),r.SLS={get:function(e){return r.SS.get(e)||r.LS.get(e)},set:function(e,t){return r.SS.set(e,t),r.LS.set(e,t),t}};var c={REMOTE_ERROR:"正在连接服务器..."};r.ERR=function(e){return c[e]};var l=r.ERRORCODES={FORBIDDEN:"FORBIDDEN"};for(var u in c)c.hasOwnProperty(u)&&(l[u]=u);r.STATUSES={SUCCESS:"success",FAILED:"failed"}}(window,document);