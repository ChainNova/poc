define(["common/module","jade!tmpl/issue/release","jade!tmpl/issue/assign","services/issue"],function(e,s,n){var r,t;return t=["user_type1_0","user_type1_1","user_type1_2","user_type1_3","user_type1_4"],r={release:{name:"发行",title:"发行货币"},assign:{name:"派发",title:"派发货币"}},e.controller("issuerDetail",["$scope","issueServ","$dialog",function(e,t,a){var i,u,o;return i=null,u=null,o=function(e,s,n){},e.release=function(n,u){var o;if(n.id)return o=r.release,i=a.open({title:o.title,classname:"dialog3",template:s,scope:e,controller:["$scope",function(s){return s.releaseData={currency:n.id},s.mkRelease=function(){return s.pending=!0,t.release(s.releaseData,function(n,r){return s.pending=!1,r?CORE.msg(r.error_msg,"warn"):(i.close(),CORE.msg("系统正在增发{0}{1}, 请稍后查看数量更新.".format(s.releaseData.currency,s.releaseData.amount),"ok"),e.$emit("issueUpdateSuccuess"))})}}]})},e.assign=function(s,u){var o;if(s.id)return o=r.assign,i=a.open({title:o.title,classname:"dialog3",template:n,scope:e,controller:["$scope",function(n){var r;return r=function(){return n.user_pending=!0,t.allUsers(function(e,s){return n.user_pending=!0,n.users=e.users,n.assignData={curAssign:{owner:n.users[0]}}})},r(),n.mkAssign=function(){var r;return r={currency:s.id,assigns:[n.assignData.curAssign]},n.pending=!0,t.assignCurrency(r,function(r,t){return n.pending=!1,t?CORE.msg(t.error_msg,"warn"):(i.close(),CORE.msg("系统正在向{2} 派发{0}{1}, 请稍后查看数量更新.".format(n.assignData.curAssign.count,s.id,n.assignData.curAssign.owner),"ok"),e.$emit("issueUpdateSuccuess"))})}}]})},e.$emit("updateViewLoaded")}])});