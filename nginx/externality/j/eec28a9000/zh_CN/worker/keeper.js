define([],function(){var e=CORE.jspath+"worker/",t={},n={},r=function(r){var a=t[r];return a||(a=t[r]=new Worker(e+r+".js"),a.addEventListener("message",function(e){var t=e.data,r=n[t.id];r&&(r(t.data),delete n[t.id])})),a},a=function(e){this.worker=r(e),this.req=function(e){var t=CORE.tsid(e.type+"-");n[t]=e.cb,this.worker.postMessage({type:e.type,data:e.data,id:t})}};return function(e){return new a(e)}});