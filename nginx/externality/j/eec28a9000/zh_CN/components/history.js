define(["common/module","jade!tmpl/history","services/history"],function(r,t){var n;return n={historys:[]},r.directive("ngdHistory",["$location","$timeout","historyServ",function(r,i,o){return{restrict:"E",transclude:!0,replace:!0,template:t,link:function(r,t,i,e){var s;return r.History=n,s=function(r){return n.pending=!0,o.history(function(t,i){return n.pending=!1,i?CORE.msg(i.error_msg,"warn"):n.historys=r?n.historys.concat(t.historys):t.historys})},s(),r.loadmore=function(){return s(!0)}}}}])});