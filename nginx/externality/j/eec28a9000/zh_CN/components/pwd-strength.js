define(["common/module"],function(t){return t.directive("ngdPwd",function(){return{require:"ngModel",restrict:"A",link:function(t,e,n,a){var r,o,l,d,i,s;if(a)return o=n.ngdPwd||"strength",r=n.ngdPwdFormdata||"formData",delete t[o],l=function(t,e){var n,a,r,o,l,d,i;for(d="",n=r=0,o=e.length;r<o;n=++r){for(i=e[n],l=!0,a=0;a<t&&a+n+t<e.length;)l=l&&e.charAt(a+n)===e.charAt(a+n+t),a++;a<t&&(l=!1),l?(n+=t-1,l=!1):d+=e.charAt(n)}return d},d=function(n){a.$setValidity(o,!1),t[o]=n,e.parent().removeClass("txt-msgs-active")},i=function(n){a.$setValidity(o,!0),t[o]=n,e.parent().addClass("txt-msgs-active")},s=function(e){var n,a,s,h,c,u,m,g,w,f,v;return f=0,e?(v=""+(null!=(s=t[r])?s.uname:void 0)||(null!=(h=Const.user)?h.nick:void 0),v&&~e.toLowerCase().indexOf(v.toLowerCase())?d("match"):(n=""+(null!=(c=t[r])?c.pwd:void 0)||(null!=(u=t[r])?u.password:void 0),n&&n.toLowerCase()===e.toLowerCase()?d("matchPwd"):(a=""+(null!=(m=t[r])?m.oldpwd:void 0)||(null!=(g=t[r])?g.pwd:void 0)||(null!=(w=t[r])?w.password:void 0),a&&a.toLowerCase()===e.toLowerCase()?d("newIsOld"):e.length<6?d("weak"):(f+=4*e.length,f+=1*(l(1,e).length-e.length),f+=1*(l(2,e).length-e.length),f+=1*(l(3,e).length-e.length),f+=1*(l(4,e).length-e.length),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(f+=5),e.match(/(.*[!,@,#,$,%,&,*,?,_,~].*[!,@,#,$,%,&,*,?,_,~])/)&&(f+=5),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(f+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(f+=15),e.match(/([!,@,#,$,%,&,*,?,_,~])/)&&e.match(/([0-9])/)&&(f+=15),e.match(/([!,@,#,$,%,&,*,?,_,~])/)&&e.match(/([a-zA-Z])/)&&(f+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(f-=10),f<0&&(f=0),f>100&&(f=100),f<34?d("weak"):(i(f>=68?"strong":"medium"),e))))):t[o]=""},a.$formatters.push(s),a.$parsers.unshift(s),n.$observe("ngdPwd",function(){return s(a.$viewValue)})}}})});